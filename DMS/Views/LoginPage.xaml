<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             x:Class="DMS.Views.LoginPage"
             Title="LoginPage">
    <ContentPage.Resources>
        <Color x:Key="Primary">#4F46E5</Color>
        <Color x:Key="CardBg">#FFFFFFFF</Color>
        <Color x:Key="Bg">#F3F6FF</Color>
        <Color x:Key="Muted">#6B7280</Color>
        <Color x:Key="Border">#E5E7EB</Color>

        <Style TargetType="Label" x:Key="FieldLabel">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="TextColor" Value="#374151"/>
            <Setter Property="Margin" Value="0,8,0,6"/>
        </Style>

        <Style TargetType="Entry" x:Key="FieldEntry">
            <Setter Property="BackgroundColor" Value="#F9FAFB"/>
            <Setter Property="TextColor" Value="#111827"/>
            <Setter Property="PlaceholderColor" Value="#9CA3AF"/>
            <Setter Property="HeightRequest" Value="44"/>
            <Setter Property="Margin" Value="0,0,0,0"/>
            <!--<Setter Property="Padding" Value="14,0,0,0"/>-->
        </Style>

        <Style TargetType="Button" x:Key="PrimaryButton">
            <Setter Property="BackgroundColor" Value="{StaticResource Primary}"/>
            <Setter Property="TextColor" Value="White"/>
            <Setter Property="FontAttributes" Value="Bold"/>
            <Setter Property="CornerRadius" Value="10"/>
            <Setter Property="HeightRequest" Value="48"/>
        </Style>

        <Style TargetType="Button" x:Key="LinkButton">
            <Setter Property="BackgroundColor" Value="Transparent"/>
            <Setter Property="TextColor" Value="{StaticResource Primary}"/>
            <Setter Property="Padding" Value="0"/>
        </Style>
    </ContentPage.Resources>
    <Grid BackgroundColor="{StaticResource Bg}">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Border
        BackgroundColor="{StaticResource CardBg}"
        Stroke="{StaticResource Border}"
        StrokeShape="RoundRectangle 18"
        Padding="22"
        Margin="24"
        HorizontalOptions="Center"
        VerticalOptions="Center">
            <Border.Shadow>
                <Shadow Brush="#000000" Opacity="0.2" Radius="10"/>
            </Border.Shadow>

            <Grid RowSpacing="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Spinner badge -->
                <Border Grid.Row="0"
                    WidthRequest="64" HeightRequest="64"
                    StrokeShape="Ellipse"
                    BackgroundColor="#EEF2FF"
                    Stroke="#E0E7FF"
                    HorizontalOptions="Center"
                    VerticalOptions="Center"
                    Margin="0,6,0,14">
                    <Image Source="profile.png">

                    </Image>
                    <!--<ActivityIndicator IsRunning="True" IsVisible="True" />-->
                </Border>

                <!-- Title & subtitle -->
                <VerticalStackLayout Grid.Row="1" Spacing="4" Margin="0,0,0,18" HorizontalOptions="Center">
                    <Label Text="Welcome"
                       FontSize="22"
                       FontAttributes="Bold"
                       HorizontalTextAlignment="Center"
                       TextColor="#111827" />
                    <Label Text="Enter your credentials to access the system"
                       FontSize="13"
                       HorizontalTextAlignment="Center"
                       TextColor="{StaticResource Muted}" />
                </VerticalStackLayout>

                <!-- Username -->
                <VerticalStackLayout Grid.Row="2">
                    <Label Style="{StaticResource FieldLabel}" Text="User Name" />
                    <Border
                    HeightRequest="44"
                    Stroke="{StaticResource Border}"
                    StrokeShape="RoundRectangle 10"
                    BackgroundColor="#F9FAFB"
                    Padding="10,0,0,0">
                        <Grid ColumnDefinitions="Auto,*">
                            <Label Text="ðŸ‘¤" VerticalOptions="Center" Margin="0,0,8,0"/>
                            <Entry Grid.Column="1"
                               Style="{StaticResource FieldEntry}"
                               BackgroundColor="Transparent"
                               Placeholder="username"
                               x:Name="UsernameEntry">
                                <Entry.Behaviors>
                                    <toolkit:TextValidationBehavior
                                        x:Name="usernameValidator"
                                        MinimumLength="1"
                                        Flags="ValidateOnAttaching,ValidateOnValueChanged"/>
                                </Entry.Behaviors>
                            </Entry>
                        </Grid>
                    </Border>
                </VerticalStackLayout>

                <!-- Password -->
                <VerticalStackLayout Grid.Row="3">
                    <Label Style="{StaticResource FieldLabel}" Text="Password" />
                    <Border
                    HeightRequest="44"
                    Stroke="{StaticResource Border}"
                    StrokeShape="RoundRectangle 10"
                    BackgroundColor="#F9FAFB"
                    Padding="10,0,0,0">
                        <Grid ColumnDefinitions="Auto,*">
                            <Label Text="ðŸ”’" VerticalOptions="Center" Margin="0,0,8,0"/>
                            <Entry Grid.Column="1"
                               Style="{StaticResource FieldEntry}"
                               BackgroundColor="Transparent"
                               Placeholder="password"
                               IsPassword="True"
                               x:Name="PasswordEntry">
                                <Entry.Behaviors>
                                    <toolkit:TextValidationBehavior
                                            x:Name="passwordValidator"
                                            MinimumLength="1"
                                            Flags="ValidateOnAttaching,ValidateOnValueChanged"
                                            />
                                </Entry.Behaviors>
                            </Entry>
                        </Grid>
                    </Border>
                </VerticalStackLayout>

                <!-- Forgot password -->
                <Grid Grid.Row="4" Margin="0,6,0,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <Button Grid.Column="1"
                        Text="Forgot Password?"
                        Style="{StaticResource LinkButton}"
                        Clicked="OnForgotPasswordClicked"/>
                </Grid>

                <!-- Login button -->
                <Button Grid.Row="5"
                    Text="Login"
                    Style="{StaticResource PrimaryButton}"
                    Clicked="OnLoginClicked"
                    Margin="0,6,0,10" />

                <!-- Register / link row -->
                <HorizontalStackLayout Grid.Row="6" HorizontalOptions="Center" Spacing="6" Margin="0,8,0,6">
                    <Label Text="Don't have an account?"  TextColor="{StaticResource Muted}" />
                    <Button Text="Register Here" Style="{StaticResource LinkButton}" Clicked="OnRegisterClicked"/>
                </HorizontalStackLayout>


            </Grid>
        </Border>
    </Grid>
</ContentPage>